<div id="header">
  <%= render "users/header" %>
</div>

<div class="body">
  <div class="container follower_index">

    <h3 style="color: #777777;">フォロワ一覧</h3>
    <table class="table table-hover table-inverse">
      <thead>
        <tr>
          <th style="color: #777777;">Image</th>
          <th style="color: #777777;">Name</th>
          <th style="color: #777777;">Level</th>
          <th colspan="3"></th>
        </tr>
      </thead>
      <tbody>
        <% @user.follower_user.each do |user| %>
          <tr>
            <td><%= attachment_image_tag user, :image, :fill, 35, 35, format: 'jpeg', fallback: "no_image.jpg", size:'35x35' %></td>
            <td><%= user.name %></td>
            <% if user.project_data.all.sum(:hour) == 0 %>
              <td>Lv.<%= user.project_data.all.sum(:hour) %></td>
            <% elsif user.project_data.all.sum(:hour) > 100 %>
              <td style="color: rgba(200, 0, 0, 0.8);">Lv.<%= user.project_data.all.sum(:hour) %></td>
            <% elsif user.project_data.all.sum(:hour) > 80 %>
              <td style="color: #FF570D;">Lv.<%= user.project_data.all.sum(:hour) %></th>
            <% elsif user.project_data.all.sum(:hour) > 40 %>
              <td style="color: #008000;">Lv.<%= user.project_data.all.sum(:hour) %></td>
            <% elsif user.project_data.all.sum(:hour) > 20 %>
              <td style="color: #005FFF;">Lv.<%= user.project_data.all.sum(:hour) %></td>
            <% elsif user.project_data.all.sum(:hour) > 0 %>
              <td style="color: #000080;">Lv.<%= user.project_data.all.sum(:hour) %></td>
            <% end %>
            <td>following：<%= user.follower.count %></td>
            <td>follower：<%= user.followed.count %></td>
            <td>
              <% unless user == current_user %>
                <% if current_user.following?(user) %>
                  <%= link_to 'unfollow', unfollow_path(user.id,redirect_id: 3), method: :POST, data: {"turbolinks" => false} %>
                <% else %>
                  <%= link_to 'follow', follow_path(user.id,redirect_id: 3), method: :POST, data: {"turbolinks" => false} %>
                  <% end %>
                <% end %>
            </td>
            <td><%= link_to "Show", user_path(user.id), data: {"turbolinks" => false} %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>

<div class="footer">
  <%= render "tops/footer" %>
</div>
